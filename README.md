Usage:
This is an in depth OSNIT tool designed for Instagram

Installation:
```

pkg install git python -y && pip install requests stdiomask && git clone https://github.com/Yourl0calbroker/BrokerOSNIT.git $HOME/BrokerOSNIT && printf "# Define colors and formatting codes\nCYAN = '\033[96m'\nGREEN = '\033[92m'\nRED = '\033[91m'\nYELLOW = '\033[93m'\nLIGHT_YELLOW_EX = '\033[93m'\nLIGHT_BLUE_EX = '\033[94m'\nITALIC = '\033[3m'\nITALIC_OFF = '\033[23m'\n\ndef colorPrint(*args):\n    output = ''.join(args)\n    print(output + '\033[0m') \n\nimport requests\nfrom datetime import datetime\nfrom requests.exceptions import RequestException\nimport os\nimport time\nimport threading \n\ndef get_time_str():\n    return datetime.now().strftime(\"%H:%M:%S\")\n\nis_video = None\nmedia_url = None\nfile_name = None\nstop_animation = False \n\ndef animated_loading_bar(duration_seconds=15, message=\"Your_l0cal_broker\"):\n    \n    global stop_animation\n    \n    bar_length = 30\n    steps = 100\n    interval = duration_seconds / steps\n\n    print_style = \"\\r\\033[92m\" \n    \n    for i in range(steps + 1):\n        if stop_animation:\n            break\n            \n        progress = i / steps\n        filled_length = int(bar_length * progress)\n        bar = 'â–ˆ' * filled_length + '-' * (bar_length - filled_length)\n        \n        print(f\"{print_style}[{bar}] {int(progress * 100)}% {message}\\033[0m\", end='', flush=True)\n        time.sleep(interval)\n\n    print(\"\\r\" + \" \" * (bar_length + 20) + \"\\r\", end='', flush=True)\n    \n\ndef fetch_data(username):\n    global stop_animation\n    current_time = get_time_str()\n    colorPrint(\n        CYAN, f\"[{current_time}] \\t\",\n        GREEN, \"[INFO] \\t\\t\\b\", \n        LIGHT_YELLOW_EX, \"Fetching profile info and posts...\"\n    )\n    \n    response = None\n    \n    loading_thread = threading.Thread(target=animated_loading_bar, args=(30, \"Your_l0cal_broker\")) \n    loading_thread.start()\n    \n    try:\n        url = f\"https://www.instagram.com/api/v1/users/web_profile_info/?username={username}\"\n        headers = {\n            \"X-IG-App-ID\": \"936619743392459\",\n        }\n        response = requests.get(url, headers=headers, timeout=15)\n        \n        stop_animation = True\n        loading_thread.join() \n\n        if response.status_code != 200:\n            error_handler(response)\n            return \n\n        user_data = response.json()[\"data\"][\"user\"]\n        \n        account_type(user_data)\n        posts_found = get_posts(user_data)\n        \n        if posts_found:\n            ask_to_download()\n        \n    except RequestException as e:\n        stop_animation = True\n        loading_thread.join()\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, \"[REQUEST] \\t\\b\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, f\"Network or connection error: {e}\"\n        )\n    except Exception as e:\n        stop_animation = True\n        loading_thread.join()\n        status_code = response.status_code if response is not None else \"N/A\"\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, f\"[{status_code}] \\t\\t\\b\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, f\"Failed to fetch account data: {e}\"\n        )\n\n\ndef error_handler(response):\n    current_time = get_time_str()\n    if response.status_code == 404:\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            RED, \"[404] \\t\\t\\b\",\n            RED, \"[ERROR] \\t\\t\",\n            RED, \"User not found\"\n        )\n    elif response.status_code == 401:\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            RED, \"[401] \\t\\t\\b\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, \"Instagram added rate limit to your IP. Try again later\"\n        )\n    else:\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            RED, f\"[{response.status_code}] \\t\\t\\b\",\n            RED, \"[ERROR] \\t\\t\",\n            RED, \"Something went wrong\"\n        )\n\n\ndef account_type(user_data):\n    current_time = get_time_str()\n    if user_data.get(\"is_private\"):\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            GREEN, \"[TYPE]  \\t\\b\",\n            RED, \"Private profile\\n\"\n        )\n    else:\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            GREEN, \"[TYPE]  \\t\\b\",\n            RED, \"Public profile\\n\"\n        )\n\n\ndef get_posts(user_data):\n    current_time = get_time_str()\n    edges = user_data[\"edge_owner_to_timeline_media\"][\"edges\"]\n\n    if not edges:\n        colorPrint(\n            CYAN, f\"[{current_time}] \\t\",\n            GREEN, \"[POST]  \\t\\b\",\n            RED, \"No posts found\"\n        )\n        return False\n    else:\n        for i, post_item in enumerate(edges, 1):\n            post_data = post_item[\"node\"]\n            post_shortcode = post_data[\"shortcode\"]\n            is_video_flag = post_data[\"is_video\"]\n            post_owner = user_data[\"username\"]\n\n            post_url = f\"https://www.instagram.com/p/{post_shortcode}/\"\n            \n            colorPrint(YELLOW, f\"++------------------------------------------------------[{i}]-----------------------------------------------------+\\n\")\n\n            if is_video_flag:\n                colorPrint(\n                    CYAN, f\"[{current_time}] \\t\",\n                    GREEN, \"[VIDEO]  \\t\\b\",\n                    LIGHT_BLUE_EX, post_url\n                )\n            else:\n                colorPrint(\n                    CYAN, f\"[{current_time}] \\t\",\n                    GREEN, \"[IMAGE]  \\t\\b\",\n                    LIGHT_BLUE_EX, post_url\n                )\n\n            colorPrint(\n                CYAN, f\"[{current_time}] \\t\",\n                GREEN, \"[OWNER] \\t\\b\",\n                LIGHT_BLUE_EX, f\"https://www.instagram.com/{post_owner}\"\n            )\n\n            tagged_edges = post_data.get(\"edge_media_to_tagged_user\", {}).get(\"edges\", [])\n            for collaborator_item in tagged_edges:\n                collaborator_username = collaborator_item[\"node\"][\"user\"][\"username\"]\n                colorPrint(\n                    CYAN, f\"[{current_time}] \\t\",\n                    GREEN, \"[COLLAB] \\t\\b\",\n                    LIGHT_BLUE_EX, f\"https://www.instagram.com/{collaborator_username}\"\n                )\n            \n            print()\n        return True\n\ndef ask_to_download():\n    print()\n    download_choice = input(\n        f\"[{get_time_str()}] \\t [PROMPT] \\t Would you like to download any of the posts listed? (y/n): \"\n    ).lower().strip()\n    \n    if download_choice in ('y', 'yes'):\n        post_url = input(\n            f\"[{get_time_str()}] \\t [PROMPT] \\t Enter the full post URL to download: \"\n        ).strip()\n        download_media(post_url)\n    else:\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            GREEN, \"[INFO] \\t\\t\", \n            LIGHT_YELLOW_EX, \"Download skipped. Exiting.\"\n        )\n\ndef fetch_media_details(url):\n    global is_video, media_url, file_name\n    \n    is_video, media_url, file_name = None, None, None\n\n    parts = url.strip('/').split(\"/\")\n    \n    if len(parts) < 6 or parts[4] not in (\"p\", \"reel\"):\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, \"[ERROR] \\t\",\n            RED, \"Invalid URL format. Check if the URL is complete.\"\n        )\n        return False\n\n    user_name = parts[3]\n    shortcode = parts[5]\n    \n    is_reel = parts[4] == 'reel'\n    file_name = f\"{user_name}-{'reel' if is_reel else 'post'}-{shortcode.replace('-', '')[:10]}{'.mp4' if is_reel else '.jpg'}\"\n    \n    colorPrint(\n        CYAN, f\"[{get_time_str()}] \\t\",\n        GREEN, \"[INFO] \\t\\t\", \n        LIGHT_YELLOW_EX, \"Fetching media link...\"\n    )\n    \n    response = None\n    try:\n        r = requests.get(\n            f\"https://www.instagram.com/api/v1/users/web_profile_info/?username={user_name}\",\n            headers={\"X-IG-App-ID\": \"936619743392459\"},\n            timeout=15\n        )\n        response = r\n\n        if r.status_code != 200:\n            error_handler(r)\n            return False\n\n        edges = r.json()[\"data\"][\"user\"][\"edge_owner_to_timeline_media\"][\"edges\"]\n        found = False\n        for edge in edges:\n            node = edge[\"node\"]\n            if node[\"shortcode\"] == shortcode:\n                is_video = node[\"is_video\"]\n                media_url = node[\"video_url\"] if is_video else node[\"display_url\"]\n                \n                if is_video and not file_name.endswith('.mp4'):\n                    file_name = file_name[:-4] + '.mp4'\n                elif not is_video and not file_name.endswith('.jpg'):\n                    file_name = file_name[:-4] + '.jpg'\n                \n                found = True\n                break\n        \n        if not found:\n            colorPrint(\n                CYAN, f\"[{get_time_str()}] \\t\",\n                RED, \"[ERROR] \\t\",\n                RED, \"Post not found in the user's latest feed. (Instagram API limitation)\"\n            )\n            return False\n\n        return True\n\n    except RequestException as e:\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, \"[REQUEST] \\t\\b\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, f\"Network error during media link fetch: {e}\"\n        )\n        return False\n    except Exception as e:\n        status_code = response.status_code if response is not None else \"N/A\"\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, f\"[{status_code}] \\t\\t\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, f\"Failed to fetch media data: {e}\"\n        )\n        return False\n\n\ndef download_media(post_url):\n    global is_video, media_url, file_name\n    \n    if not fetch_media_details(post_url):\n        return\n\n    if not media_url:\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, \"[ERROR] \\t\",\n            RED, \"Could not extract media URL.\"\n        )\n        return\n\n    download_dir = \"InstaDownloads\"\n    if not os.path.exists(download_dir):\n        os.makedirs(download_dir)\n\n    colorPrint(\n        CYAN, f\"[{get_time_str()}] \\t\",\n        GREEN, \"[INFO] \\t\\t\",\n        LIGHT_YELLOW_EX, \"Starting download...\"\n    )\n    \n    try:\n        r = requests.get(\n            media_url, \n            headers={\"X-IG-App-ID\": \"936619743392459\"},\n            stream=True,\n            timeout=30\n        )\n\n        if r.status_code == 200:\n            file_path = os.path.join(download_dir, file_name)\n            with open(file_path, \"wb\") as f:\n                for chunk in r.iter_content(chunk_size=8192):\n                    f.write(chunk)\n\n            colorPrint(\n                CYAN, f\"[{get_time_str()}] \\t\",\n                GREEN, \"[SUCCESS] \\t\",\n                LIGHT_YELLOW_EX, \"Downloaded \",\n                LIGHT_BLUE_EX, ITALIC, f\"{file_name} \", ITALIC_OFF,\n                LIGHT_YELLOW_EX, f\"to {ITALIC}'{download_dir}'{ITALIC_OFF} folder\"\n            )\n        else:\n            colorPrint(\n                CYAN, f\"[{get_time_str()}] \\t\",\n                RED, f\"[{r.status_code}] \\t\\t\\b\",\n                YELLOW, \"[WARNING] \\t\",\n                RED, f\"Failed to download media from {media_url}\"\n            )\n    except RequestException as e:\n        colorPrint(\n            CYAN, f\"[{get_time_str()}] \\t\",\n            RED, \"[DOWNLOAD ERR] \\t\\b\",\n            YELLOW, \"[WARNING] \\t\",\n            RED, f\"Error during media download: {e}\"\n        )\n\n\ndef time():\n    return get_time_str()\n\n# if __name__ == \"__main__\":\n#     username = input(\"Enter Instagram username: \")\n#     fetch_data(username)\n" > $HOME/BrokerOSNIT/LocalOSNIT.py && chmod +x $HOME/BrokerOSNIT/BrokerOSNIT.py $HOME/BrokerOSNIT/LocalOSNIT.py && mkdir -p $HOME/bin && if ! grep -q 'export PATH="$HOME/bin:$PATH"' $HOME/.bashrc; then echo 'export PATH="$HOME/bin:$PATH"' >> $HOME/.bashrc; fi && source $HOME/.bashrc && ln -sf $HOME/BrokerOSNIT/BrokerOSNIT.py $HOME/bin/BrokerOSNIT.py && ln -sf $HOME/BrokerOSNIT/LocalOSNIT.py $HOME/bin/LocalOSNIT.py

```

Run with command 
```
BrokerOSNIT.py
```

Updating: 
```
cd BrokerOSNIT && git pull origin main
```
Important Note:

If an error is encountered with 2FA, either turn off 2FA temporarily or create a new account for use

Any errors regarding logging in for Session ID retrieval can be a result of account suspension if an account automated requests become obvious

Session ID related issues are temporary and so are activity suspensions regarding the requests for API information

If Session ID issues persists, log into the Instagram account and check for notifications regarding unusual activity and verify it was you
